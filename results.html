<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Results - Dr. JA Edwards Lab</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">
</head>
<body>
    <header>
        <h1>Results</h1>
    </header>

    <main>
        <section class="result-section">
            <h2>Analysis Results</h2>
            <div id="result-message">Processing your files...</div>
            <img id="result-image" alt="Result Image" style="display: none;">
            <a id="download-link" style="display: none;">Download Image</a>
        </section>
    </main>

    <footer>
        <p>&copy; 2024 Dr. JA Edwards and Dr. Song Lab. All rights reserved.</p>
    </footer>

    <script>
        document.addEventListener("DOMContentLoaded", function() {
            // Fetch the image URL from the URL query parameters
            const params = new URLSearchParams(window.location.search);
            const imageUrl = params.get('image_url');
            
            if (imageUrl) {
                const imgElement = document.getElementById('result-image');
                const downloadLink = document.getElementById('download-link');
                imgElement.src = imageUrl;
                imgElement.style.display = 'block';
                downloadLink.href = imageUrl;
                downloadLink.textContent = 'Download Image';
                downloadLink.style.display = 'block';
                document.getElementById('result-message').textContent = 'Your results are ready!';
            } else {
                document.getElementById('result-message').textContent = 'An error occurred while processing your files.';
            }
        });
    </script>
</body>
</html>
